local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local ToggleButton = Instance.new("TextButton")
local SpeedTextBox = Instance.new("TextBox")

-- Configure the ScreenGui
ScreenGui.Parent = game.CoreGui

-- Configure the Frame
Frame.Parent = ScreenGui
Frame.BackgroundColor3 = Color3.new(0,0,0)
Frame.BackgroundTransparency = 0.5
Frame.BorderColor3 = Color3.new(0,0,1)
Frame.BorderSizePixel = 2
Frame.Position = UDim2.new(0.7, 0, 0.491666675, 0)
Frame.Size = UDim2.new(0.1, 0, 0.1, 0)
Frame.Active = true
Frame.Draggable = true

-- Configure UI Corner for Frame
local frameCorner = Instance.new("UICorner")
frameCorner.CornerRadius = UDim.new(0.2, 0)
frameCorner.Parent = Frame

-- Configure the ToggleButton
ToggleButton.Parent = Frame
ToggleButton.BackgroundColor3 = Color3.new(1,1,1)
ToggleButton.BackgroundTransparency = 0.5
ToggleButton.Position = UDim2.new(0.103524067, 0, 0.200333327, 0)
ToggleButton.TextColor3 = Color3.new(0,0,0)
ToggleButton.Size = UDim2.new(0.8,0.9,0.6)
ToggleButton.Font = Enum.Font.SourceSansLight
ToggleButton.FontSize = Enum.FontSize.Size14
ToggleButton.Text = "Start Teleport"
ToggleButton.TextScaled = true
ToggleButton.TextSize = 8
ToggleButton.TextWrapped = true

-- Configure UI Corner for ToggleButton
local buttonCorner = Instance.new("UICorner")
buttonCorner.CornerRadius = UDim.new(0.2, 0)
buttonCorner.Parent = ToggleButton

-- Configure the Speed TextBox
SpeedTextBox.Parent = Frame
SpeedTextBox.BackgroundColor3 = Color3.new(1,1,1)
SpeedTextBox.BackgroundTransparency = 0.5
SpeedTextBox.Position = UDim2.new(0.103524067, 0, 0.0, 0)
SpeedTextBox.TextColor3 = Color3.new(0,0,0)
SpeedTextBox.Size = UDim2.new(0.8,0,0.2,0)
SpeedTextBox.Font = Enum.Font.SourceSansLight
SpeedTextBox.FontSize = Enum.FontSize.Size14
SpeedTextBox.PlaceholderText = "Enter teleport speed (seconds)"
SpeedTextBox.TextScaled = true
SpeedTextBox.TextSize = 8
SpeedTextBox.TextWrapped = true

-- Configure UI Corner for SpeedTextBox
local speedBoxCorner = Instance.new("UICorner")
speedBoxCorner.CornerRadius = UDim.new(0.2, 0)
speedBoxCorner.Parent = SpeedTextBox

-- State variables
local isTeleporting = false
local teleportCoroutine

-- Function to start teleporting
local function startTeleporting()
    local Enlightal = game:GetService("Workspace")["The Arkenstone"].Handle
    if not Enlightal then
        warn("The Arkenstone handle not found.")
        return
    end

    local Player = game.Players.LocalPlayer
    local Char = Player.Character
    local Hum = Char:FindFirstChild("HumanoidRootPart")
    local teleportSpeed = tonumber(SpeedTextBox.Text) or 0.5
    if teleportSpeed <= 0 then
        teleportSpeed = 0.5
    end

    while isTeleporting do
        local originalCFrame = Hum.CFrame
        Hum.CFrame = Enlightal.CFrame
        task.wait(teleportSpeed)
        Hum.CFrame = originalCFrame
        task.wait(teleportSpeed)
    end
end

-- Function to handle ToggleButton click
ToggleButton.MouseButton1Click:Connect(function()
    if isTeleporting then
        isTeleporting = false
        ToggleButton.Text = "Start Teleport"
        Frame.BackgroundColor3 = Color3.new(0,0,0)
    else
        isTeleporting = true
        ToggleButton.Text = "Stop Teleport"
        Frame.BackgroundColor3 = Color3.new(0,1,0)
        if not teleportCoroutine then
            teleportCoroutine = coroutine.create(startTeleporting)
            coroutine.resume(teleportCoroutine)
        end
    end
end)

-- Function to handle the textbox lose focus event
SpeedTextBox.FocusLost:Connect(function()
    local teleportSpeed = tonumber(SpeedTextBox.Text) or 0.5
    if teleportSpeed <= 0 then
        SpeedTextBox.Text = "0.5"
    end
end)
