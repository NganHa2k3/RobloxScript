-- Services
local Players = game:GetService("Players")
local PathfindingService = game:GetService("PathfindingService")
local Debris = game:GetService("Debris")

-- Create GUI
local player = Players.LocalPlayer
local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local TextBox = Instance.new("TextBox")
local UICorner = Instance.new("UICorner")

ScreenGui.Parent = player:WaitForChild("PlayerGui")

Frame.Parent = ScreenGui
Frame.BackgroundColor3 = Color3.new(1, 1, 1)
Frame.BackgroundTransparency = 0.9
Frame.BorderColor3 = Color3.new(0, 0, 1)
Frame.BorderSizePixel = 2
Frame.Position = UDim2.new(0.7, 0, 0.491666675, 0)
Frame.Size = UDim2.new(0.3, 0, 0.1, 0)
Frame.Active = true
Frame.Draggable = true

TextBox.Parent = Frame
TextBox.BackgroundColor3 = Color3.new(1, 1, 1)
TextBox.BackgroundTransparency = 0.9
TextBox.Position = UDim2.new(0.1, 0, 0.2, 0)
TextBox.Size = UDim2.new(0.8, 0, 0.6, 0)
TextBox.Font = Enum.Font.PatrickHand
TextBox.TextSize = 14
TextBox.Text = "Enter player name..."
TextBox.TextScaled = true
TextBox.TextWrapped = true

UICorner.Parent = TextBox

local function onPlayerNameEntered(playerName)
    local targetPlayer = Players:FindFirstChild(playerName)
    
    if not targetPlayer or not targetPlayer.Character or not targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
        print("Player not found or has no character.")
        return
    end

    local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
    local startPosition = player.Character.HumanoidRootPart.Position
    local targetPosition = targetPlayer.Character.HumanoidRootPart.Position

    if humanoid then
        -- Create the path to the target position
        local path = PathfindingService:CreatePath({
            AgentRadius = humanoid.HipWidth,
            AgentHeight = humanoid.HipHeight,
            AgentCanJump = humanoid.JumpPower > 0,
            AgentJumpHeight = humanoid.JumpPower,
            AgentMaxSlope = 45
        })
        
        path:ComputeAsync(startPosition, targetPosition)
        path:MoveTo(player.Character.HumanoidRootPart)

        path.StatusChanged:Connect(function(status)
            if status == Enum.PathStatus.Complete then
                print("Path completed.")
            elseif status == Enum.PathStatus.NoPath then
                print("No path found.")
            end
        end)
    end
end

-- Connect the TextBox change event to start the pathfinding
TextBox.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        local playerName = TextBox.Text
        if playerName and playerName ~= "" then
            onPlayerNameEntered(playerName)
        end
    end
end)
